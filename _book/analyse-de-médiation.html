<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title> 1 Analyse de médiation | Méthodes Quantitatives avec R</title>
<meta name="author" content="P.-O. Caron">
<meta name="description" content="L’analyse de médiation est une analyse statistique de plus en plus populaire auprès des expérimentateurs, peu importe leur discipline. Cette analyse cherche à expliquer les mécanismes biologiques,...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content=" 1 Analyse de médiation | Méthodes Quantitatives avec R">
<meta property="og:type" content="book">
<meta property="og:url" content="mqr.teluq.ca/analyse-de-médiation.html">
<meta property="og:description" content="L’analyse de médiation est une analyse statistique de plus en plus populaire auprès des expérimentateurs, peu importe leur discipline. Cette analyse cherche à expliquer les mécanismes biologiques,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content=" 1 Analyse de médiation | Méthodes Quantitatives avec R">
<meta name="twitter:description" content="L’analyse de médiation est une analyse statistique de plus en plus populaire auprès des expérimentateurs, peu importe leur discipline. Cette analyse cherche à expliquer les mécanismes biologiques,...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body>
<p>
    \(
    \newcommand{\EX}{\mathbb{E}}
    \)
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style><style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style><link rel="stylesheet" href="bs4_style.css"></p>

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Méthodes Quantitatives avec R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Bienvenue!</a></li>
<li><a class="" href="pr%C3%A9face.html">Préface</a></li>
<li><a class="active" href="analyse-de-m%C3%A9diation.html"><span class="header-section-number">1</span> Analyse de médiation</a></li>
<li><a class="" href="r%C3%A9f%C3%A9rences.html">Références</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/quantmeth/MQR">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="analyse-de-médiation" class="section level1" number="1">
<h1>
<span class="header-section-number"> 1</span> Analyse de médiation<a class="anchor" aria-label="anchor" href="#analyse-de-m%C3%A9diation"><i class="fas fa-link"></i></a>
</h1>
<p>L’analyse de médiation est une analyse statistique de plus en plus populaire auprès des expérimentateurs, peu importe leur discipline. Cette analyse cherche à expliquer les mécanismes biologiques, psychologiques, cognitifs, etc., qui sous-tendent la relation entre une variable indépendante et une variable dépendante par l’inclusion d’une troisième variable, c’est-à-dire la variable médiatrice. L’intérêt pour cette technique est ainsi patent, puisqu’elle quantifie le degré selon lequel une variable participe à la transmission du changement d’une <em>cause</em> vers son <em>effet</em>. L’analyse de médiation peut contribuer à mieux comprendre la relation entre une variable indépendante et une variable dépendante lorsque ces variables n’ont pas de lien direct évident.</p>
<p>L’analyse de médiation est un sous-ensemble de l’analyse de trajectoire dans lequel le statisticien s’intéresse à la relation entre la variable indépendante <span class="math inline">\(x\)</span> sur la variable dépendante <span class="math inline">\(y\)</span> par l’intermédiaire de la variable médiatrice <span class="math inline">\(m\)</span>. Elle s’inscrit dans un système d’équations. L’analyse de médiation se base sur les <em>liens indirects</em> qui existent dans ce système d’équations. Ces liens indirects sont ces relations intermédiaires qui intéressent le statisticien.</p>
<p>Concevoir ce qu’est un lien indirect est parfois plus aisé en le comparant aux <em>liens directs</em>. Un lien direct, c’est la relation entre une variable indépendante et une dépendante, comme le coefficient de régression, par exemple. Le lien indirect, c’est la relation qui existe entre une variable indépendante et une dépendante à travers une ou plusieurs autres variables.</p>
<p>Pour les fins de ce chapitre, l’analyse à un seul médiateur sera présentée (aussi nommé l’analyse de médiation simple).</p>
<div id="analyse-de-médiation-simple" class="section level2" number="1.1">
<h2>
<span class="header-section-number">1.1</span> Analyse de médiation simple<a class="anchor" aria-label="anchor" href="#analyse-de-m%C3%A9diation-simple"><i class="fas fa-link"></i></a>
</h2>
<p>Le diagramme de trajectoire correspondant au modèle de médiation simple<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;La section est partiellement basée sur &lt;span class="citation"&gt;Caron &amp;amp; Valois (&lt;a href="r%C3%A9f%C3%A9rences.html#ref-Caron18" role="doc-biblioref"&gt;2018&lt;/a&gt;)&lt;/span&gt;.&lt;/p&gt;'><sup>1</sup></a> (un seul médiateur) est présenté dans le panneau supérieur de la Figure <a href="#fig:simplemed"><strong>??</strong></a>.</p>
<p>TODO</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="12-Mediation_files/figure-html/simplemed-1.png" width="672"></div>
<!-- \begin{figure} -->
<!-- \begin{center} -->
<!-- \begin{tikzpicture}[very thick, >=stealth] -->
<!-- \Large -->
<!-- \tikzstyle{rect} = [rectangle, minimum width = 2cm, minimum height = 1cm, font=\LARGE] -->
<!-- \node (m) [draw, rect] at (3,3) {$m$}; -->
<!-- \node (x) [draw, rect] at (0,0) {$x$}; -->
<!-- \node (y) [draw, rect] at (6,0) {$y$}; -->
<!-- \node (cap1) at (3,-2) {a) Effet indirect}; -->
<!-- \node (x2) [draw, rect] at (0,-4) {$x$}; -->
<!-- \node (y2) [draw, rect] at (6,-4) {$y$}; -->
<!-- \node (cap1) at (3,-5.5) {b) Effet total}; -->
<!-- \draw[->] (x) to node [anchor = east] {$\beta_{21}$} (m); -->
<!-- \draw[->] (m) to node [anchor = west] {$\beta_{32}$} (y); -->
<!-- \draw[->] (x) to node [anchor = north] {$\beta_{31}$} (y); -->
<!-- \draw[->] (x2) to node [anchor = north] {$\sigma_{xy}$} (y2); -->
<!-- \end{tikzpicture} -->
<!-- \caption{Modèle de médiation simple} -->
<!-- \label{simplemed} -->
<!-- \end{center} -->
<!-- \end{figure} -->
<p>Le cadran a) devrait être familier aux lecteurs, car il a été abordé dans le chapitre sur l’analyse de trajectoire. La Figure <span class="math inline">\(\ref{simplemed}\)</span> peut également être représentée avec une matrice de coefficients de régression <span class="math inline">\(\mathbf{B}\)</span> dans laquelle se retrouvent les coefficients de régression qui relient les variables.</p>
<p><span class="math display" id="eq:B">\[\begin{equation}
\mathbf{B} =
\left( \begin{array}{ccc}
0 &amp; 0 &amp; 0 \\
\beta_{2,1} &amp; 0 &amp; 0 \\
\beta_{3,1} &amp; \beta_{3,2} &amp; 0 \\
\end{array}
\right)
\tag{1.1}
\end{equation}\]</span></p>
<p>Dans ce cas-ci, <span class="math inline">\(\beta_{2,1}\)</span> signifie que la variable <span class="math inline">\(x\)</span> prédit le médiateur <span class="math inline">\(m\)</span>, <span class="math inline">\(\beta_{3,2}\)</span> signifie que le médiateur prédit la variable <span class="math inline">\(y\)</span> et <span class="math inline">\(\beta_{3,1}\)</span> signifie que la variable <span class="math inline">\(x\)</span> prédit la variable <span class="math inline">\(y\)</span>. En analyse de médiation, ces effets sont nommés des <em>effets directs</em>, comme l’effet direct de <span class="math inline">\(x\)</span> sur <span class="math inline">\(y\)</span>, ou l’effet direct de <span class="math inline">\(m\)</span> sur <span class="math inline">\(y\)</span>. Pour identifier un effet médiateur, le statisticien cherche l’<em>effet indirect</em> de <span class="math inline">\(x\)</span> sur <span class="math inline">\(y\)</span>, c’est-à-dire l’effet de <span class="math inline">\(x\)</span> <em>passant</em> par <span class="math inline">\(m\)</span>. L’effet indirect est <span class="math inline">\(\beta_{2,1}\times\beta_{3,2}\)</span>. Ce résultat est dérivé notamment des travaux de <span class="citation">Wright (<a href="r%C3%A9f%C3%A9rences.html#ref-Wright34" role="doc-biblioref">1934</a>)</span> sur la méthode de coefficients de trajectoires (<em>path coefficients</em>) qui un moyen flexible de relier les coefficients de régression entre les variables d’un système d’équations.</p>
<p>Lorsqu’il n’y a pas de <span class="math inline">\(m\)</span>, la relation existante entre <span class="math inline">\(x\)</span> et <span class="math inline">\(y\)</span> est nommé l’<em>effet total</em> représenté par <span class="math inline">\(\sigma_{x,y}\)</span>. Il est illustré à la Figure <span class="math inline">\(\ref{simplemed}\)</span>b. Cela correspond au coefficient de régression entre x et y. Dans ce cas spécifique à deux variables, il s’agit également de la covariance entre <span class="math inline">\(x\)</span> et <span class="math inline">\(y\)</span>. L’effet total peut être séparé en deux autres effets dont il fait la somme : l’effet direct de <span class="math inline">\(x\)</span> sur <span class="math inline">\(y\)</span> (<span class="math inline">\(\beta_{31}\)</span>) et l’effet indirect.</p>
<p><span class="math display" id="eq:etot">\[\begin{equation}
\sigma_{3,1} = \beta_{3,1} + \beta_{2,1} \times \beta_{3,2}
\tag{1.2}
\end{equation}\]</span></p>
<p>Un avantage de l’équation <a href="analyse-de-m%C3%A9diation.html#eq:etot">(1.2)</a> est qu’elle met en relation l’interdépendance des quatre composantes pour dériver un effet total, direct ou indirect. Si trois des mesures sont connues, la quatrième est dérivable avec un peu d’algèbre. Un autre avantage sur la plan statistique est également de montrer le lien intime qui existe entre la matrice de covariance et les coefficients de régression.</p>
</div>
<div id="analyse-de-leffet-indirect" class="section level2" number="1.2">
<h2>
<span class="header-section-number">1.2</span> Analyse de l’effet indirect<a class="anchor" aria-label="anchor" href="#analyse-de-leffet-indirect"><i class="fas fa-link"></i></a>
</h2>
<p>Qu’en est-il du test d’hypothèse de l’effet indirect? Il existe trois méthodes principales pour tester si l’effet indirect est significatif. Il s’agit de la méthode d’étape causale (<em>causal step method</em>), la plus populaire étant celle de Baron et Kenny <span class="citation">(<a href="r%C3%A9f%C3%A9rences.html#ref-BK" role="doc-biblioref">Baron &amp; Kenny, 1986</a>)</span>, la méthode delta multivarié (<em>multivariate delta method</em>) <span class="citation">(<a href="r%C3%A9f%C3%A9rences.html#ref-Rao02" role="doc-biblioref">Rao, 2002</a>)</span> duquel le test de Sobel <span class="citation">(<a href="r%C3%A9f%C3%A9rences.html#ref-Sobel82" role="doc-biblioref">Sobel, 1982</a>)</span> est un cas particulier et (c) les méthodes de bootstrap <span class="citation">(<a href="r%C3%A9f%C3%A9rences.html#ref-Efron79" role="doc-biblioref">Efron &amp; Tibshriani, 1979</a>)</span>. Chacune de ces méthodes sera détaillée ci-dessous.</p>
</div>
<div id="la-méthode-détape-causale" class="section level2" number="1.3">
<h2>
<span class="header-section-number">1.3</span> La méthode d’étape causale<a class="anchor" aria-label="anchor" href="#la-m%C3%A9thode-d%C3%A9tape-causale"><i class="fas fa-link"></i></a>
</h2>
<p>La méthode d’étape causale aussi connue sous le nom de test de Baron-Kenny est un test séquentiel d’hypothèse afin de vérifier l’existence du lien indirect. Ce test est présenté à des fins historiques uniquement et parce que certains chercheurs l’exigent et l’utilisent encore. Par contre, dans la littérature méthodologique, il n’est plus recommandé, étant rejeté en faveur d’autres méthodes plus adéquates tant sur le plan statistique que conceptuel. La méthode provenant des années 80 lorsque les ordinateurs personnels n’étaient pas encore dans toutes les chaumières a certainement du mérite pour l’époque, mais n’est plus nécessaire aujourd’hui.</p>
<p>Pour réaliser le test en bonne et due forme, trois tests d’hypothèse sont réalisés en séries.</p>
<ol style="list-style-type: decimal">
<li><p>Existe-t-il une relation entre <span class="math inline">\(x\)</span> et <span class="math inline">\(y\)</span> pour l’effet total? Autrement dit, avant de procéder à l’analyse du lien indirect, y a-t-il un lien entre les variables indépendantes et dépendantes.</p></li>
<li><p>Existe-t-il une relation directe entre <span class="math inline">\(x\)</span> et <span class="math inline">\(m\)</span>? Y a-t-il un lien entre le variable indépendante et le médiateur?</p></li>
<li><p>Existe-t-il une relation directe entre <span class="math inline">\(m\)</span> et <span class="math inline">\(y\)</span>? Y a-t-il un lien entre le médiateur et la variable dépendante.</p></li>
</ol>
<p>Les tests 2 et 3 visent à vérifier si le médiateur a bel et bien un rôle à jouer entre la variable indépendante et dépendante. Le rejet de l’une ou l’autre de ces trois hypothèses mènerait certainement à un statisticien à douter d’une relation entre les variables. Comment pourrait-il y avoir un lien indirect, si l’un de ces liens n’était pas soutenu par les données.</p>
<p>En guise de quatrième test, souvent les chercheurs suivant cette tendance d’analyse test si la médiation est <em>complète</em> ou <em>partielle</em>. La médiation complète signifie que l’entièreté du lien total entre <span class="math inline">\(x\)</span> et <span class="math inline">\(y\)</span> est maintenant attribuable à l’ajout de <span class="math inline">\(m\)</span>. Ce résultat s’observe lorsque le lien direct entre <span class="math inline">\(x\)</span> et <span class="math inline">\(y\)</span> (lorsque <span class="math inline">\(m\)</span> est inclus pour prédire <span class="math inline">\(y\)</span>) n’est pas significatif contrairement à la première étape où le lien total, lui, était significatif. Si le lien direct entre <span class="math inline">\(x\)</span> et <span class="math inline">\(y\)</span> était toujours significatif même après avoir ajouté le <span class="math inline">\(m\)</span> dans la prédiction de <span class="math inline">\(y\)</span>, alors la médiation est dite partielle.</p>
<p>La syntaxe montre comment la méthode d’étape causale pourrait être programmée dans <strong>R</strong>. Il y a trois régressions, une pour chaque test d’hypothèse et quatre étapes sous forme de conditionnel (les trois hypothèses plus le type de médiation). Si une des conditions (<code>if</code>) n’est pas respectée, le test retourne l’hypothèse nulle. À chacune des étapes, la valeur-<span class="math inline">\(p\)</span> du coefficient a testé est extrait et comparé à l’erreur de type I fixé à l’avance (<span class="math inline">\(\alpha\)</span>). Le test doit être significatif pour procéder l’étape suivante. À la toute fin, l’hypothèse nulle est rejetée et le type de médiation (complète ou partielle) est rapporté.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">BK</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">donnees</span>, <span class="va">alpha</span> <span class="op">=</span> <span class="fl">.05</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># alpha est l'erreur de type I</span>
  <span class="co"># Créer l'hypothèse nulle.</span>
  <span class="co"># Le test tentera de rejeter cette hypothèse.</span>
  <span class="va">Decision</span> <span class="op">=</span> <span class="st">"L'effet indirect est non significatif"</span>
  
  <span class="co"># Première régression</span>
  <span class="co"># Est-ce que l'effet total est significatif?</span>
  <span class="va">etape1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, data <span class="op">=</span> <span class="va">donnees</span><span class="op">)</span>
  <span class="va">pC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">etape1</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"x"</span>, <span class="st">"Pr(&gt;|t|)"</span><span class="op">]</span>
  
  <span class="kw">if</span> <span class="op">(</span><span class="va">pC</span> <span class="op">&lt;=</span> <span class="va">alpha</span><span class="op">)</span><span class="op">{</span>
    <span class="co"># Si le coefficient rho_31 est significatif, alors</span>
    <span class="co"># Deuxième régression</span>
    <span class="co"># Est-ce que l'effet direct de x vers m est significatif?</span>
    <span class="va">etape2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">m</span> <span class="op">~</span> <span class="va">x</span>, data <span class="op">=</span> <span class="va">donnees</span><span class="op">)</span>
    <span class="va">pA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">etape2</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"x"</span>, <span class="st">"Pr(&gt;|t|)"</span><span class="op">]</span>
    
    <span class="kw">if</span> <span class="op">(</span><span class="va">pA</span> <span class="op">&lt;=</span> <span class="va">alpha</span><span class="op">)</span><span class="op">{</span>
      <span class="co"># Si le coefficient beta_21 est significatif, alors</span>
      <span class="co"># Troisième régression</span>
      <span class="va">etape3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">m</span>, data <span class="op">=</span> <span class="va">donnees</span><span class="op">)</span>
      <span class="va">pB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">etape3</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"m"</span>, <span class="st">"Pr(&gt;|t|)"</span><span class="op">]</span>
      
      <span class="co"># Enregistrer le résultats, si l'effet de médiation a lieu</span>
      <span class="va">Sig</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">pB</span> <span class="op">&lt;=</span> <span class="va">alpha</span><span class="op">)</span>
      
      <span class="kw">if</span> <span class="op">(</span><span class="va">Sig</span><span class="op">)</span><span class="op">{</span>
        <span class="co"># S'il y médiation, est-elle partielle ou complète?</span>
        <span class="co"># Est-ce que Beta_31 est significatif?</span>
        <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">etape3</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"x"</span>, <span class="st">"Pr(&gt;|t|)"</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="va">alpha</span><span class="op">)</span><span class="op">{</span>
          <span class="co"># Si oui,</span>
          <span class="va">Decision</span> <span class="op">&lt;-</span> 
            <span class="st">"L'effet indirect est significatif et la médiation est partielle"</span>
        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
          <span class="co"># Si non,</span>
          <span class="va">Decision</span> <span class="op">&lt;-</span> 
            <span class="st">"L'effet indirect est significatif et la médiation est complète"</span>
        <span class="op">}</span>
      <span class="op">}</span>
    <span class="op">}</span>
  <span class="op">}</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">Decision</span><span class="op">)</span> <span class="co"># Sortir le résultats dans la console.</span>
<span class="op">}</span></code></pre></div>
<p>Plusieurs raisons suggèrent de ne pas utiliser la méthode d’étape causale. D’abord, comme une série de tests d’hypothèse est réalisée, l’erreur de type I est différente de celui fixé. Il y a trois hypothèses nulles à rejeter, chacune ayant un seuil <span class="math inline">\(\alpha\)</span>. La vraie erreur de type I est égale la probabilité de rejeter toutes ces hypothèses nulles accidentellement. Cela correspond à <span class="math inline">\(\alpha^3\)</span>. Avec <span class="math inline">\(\alpha=.05\)</span>, cela signifie le taux est de <span class="math inline">\(\alpha^3=.05^3= 1.25\times 10^{-4}\)</span>, bien plus bas que l’erreur de type I fixé. Cela entraîne une perte de puissance, c’est-à-dire de trouver des effets indirects lorsqu’ils sont vrais.</p>
<p>Une seconde raison est que l’absence d’effet total entre la variable indépendante et dépendante, test si <span class="math inline">\(x\)</span> est lié à <span class="math inline">\(y\)</span> sans tenir de compte de <span class="math inline">\(m\)</span>, n’est pas une hypothèse obligatoire. Les deux autres hypothèses non plus (quoi qu’elles sont un peu plus dures à justifier) d’ailleurs. Il est tout à fait possible de</p>
</div>
<div id="la-méthode-delta-multivarié" class="section level2" number="1.4">
<h2>
<span class="header-section-number">1.4</span> La méthode delta multivarié<a class="anchor" aria-label="anchor" href="#la-m%C3%A9thode-delta-multivari%C3%A9"><i class="fas fa-link"></i></a>
</h2>
<p>La méthode delta multivarié souvent appelée le test de Sobel, auteur qui l’a popularisé pour l’analyse des effets indirects est une méthode ayant recours à l’erreur type approximative de l’effet indirect.</p>
<p>Une première raison de ne pas recourir</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mdm</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">donnees</span>, <span class="va">alpha</span> <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># alpha est l'erreur de type I</span>
  
  <span class="co"># Réaliser les deux régressions</span>
  <span class="va">etape1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">m</span> <span class="op">~</span> <span class="va">x</span>, data <span class="op">=</span> <span class="va">donnees</span><span class="op">)</span>
  <span class="va">etape2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">m</span>, data <span class="op">=</span> <span class="va">donnees</span><span class="op">)</span>
  
  <span class="co"># Extraire les statistiques</span>
  <span class="co"># Les coefficients de régression</span>
  <span class="va">beta_21</span> <span class="op">&lt;-</span> <span class="va">etape1</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"x"</span><span class="op">]</span>
  <span class="va">beta_32</span> <span class="op">&lt;-</span> <span class="va">etape2</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"m"</span><span class="op">]</span>
  <span class="co"># Leur erreur standard</span>
  <span class="va">SEa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">etape1</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"x"</span>, <span class="st">"Std. Error"</span><span class="op">]</span>
  <span class="va">SEb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">etape2</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"m"</span>, <span class="st">"Std. Error"</span><span class="op">]</span>
  
  <span class="co"># Calcul du score z de l'effet indirect</span>
  <span class="va">SE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">beta_21</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">SEb</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">beta_32</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">SEa</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>
  <span class="va">z</span> <span class="op">&lt;-</span> <span class="va">beta_21</span> <span class="op">*</span> <span class="va">beta_32</span> <span class="op">/</span> <span class="va">SE</span>
  
  <span class="co"># Décision</span>
  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">alpha</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"L'effet indirect est significatif"</span><span class="op">)</span>  
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"L'effet indirect n'est pas significatif"</span><span class="op">)</span>  
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="le-bootstrap" class="section level2" number="1.5">
<h2>
<span class="header-section-number">1.5</span> Le bootstrap<a class="anchor" aria-label="anchor" href="#le-bootstrap"><i class="fas fa-link"></i></a>
</h2>
<p>La technique la plus recommandée dans la littérature méthodologique est la méthode du bootstrap. Elle a effectivement plusieurs avantages comparativement à ses adversaires. D’abord, elle ne présuppose par une distribution de l’effet indirect, ce que sous-entend la méthode delta multivarié.</p>
<p>Dans les faits, il est assez rare de voir des différences notables.</p>
<p>Elle a une erreur de type I appropriée contraire aux deux autres.</p>
<p>Le bootstrap se base sur trois étapes :</p>
<ol style="list-style-type: decimal">
<li><p>Sélectionner aléatoirement et avec remplacement les unités d’un jeu de données;</p></li>
<li><p>Calculer l’indice statistique désirée;</p></li>
<li><p>Réitérer ces étapes un nombre très élevé de fois.</p></li>
</ol>
<p>Le test d’hypothèse n’échappe pas à cette logique.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">boot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">donnees</span>, <span class="va">alpha</span> <span class="op">=</span> <span class="fl">.05</span>, <span class="va">reps</span> <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># alpha est l'erreur de type I</span>
  <span class="co"># reps  est le nombre de répétitions</span>
  
  <span class="co"># Créer l'hypothèse nulle.</span>
  <span class="co"># Le test tentera de rejeter cette hypothèse.</span>
  <span class="va">Decision</span> <span class="op">=</span> <span class="st">"L'effet indirect est non significatif"</span>
  
  <span class="co"># Infomrations nécessaire au bootstrap.</span>
  <span class="va">n</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">jd</span><span class="op">)</span>                  <span class="co"># Nombre d'unités</span>
  <span class="va">effet.indirect</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Variable vide pour enregistrer</span>
  
  <span class="co"># La boucle</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">reps</span><span class="op">)</span><span class="op">{</span>
    <span class="co"># Sélectionner aléatoirement et avec remplacement les unités</span>
    <span class="co"># d'un jeu de données</span>
    <span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
    <span class="va">D</span> <span class="op">=</span> <span class="va">jd</span><span class="op">[</span><span class="va">index</span>,<span class="op">]</span>
    
    <span class="co"># Calculer l'indice statistique désirée</span>
    <span class="va">b21</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, data <span class="op">=</span> <span class="va">D</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"x"</span>, <span class="st">"Estimate"</span><span class="op">]</span>
    <span class="va">b32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">m</span>, data <span class="op">=</span> <span class="va">D</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"m"</span>, <span class="st">"Estimate"</span><span class="op">]</span>
    
    <span class="va">effet.indirect</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">=</span> <span class="va">b21</span> <span class="op">*</span> <span class="va">b32</span>
  <span class="op">}</span>
  
  <span class="co"># Créer l'intervalle de confiance avec alpha </span>
  <span class="va">CI</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">effet.indirect</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">alpha</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">-</span><span class="va">alpha</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>
  
  <span class="co"># Si l'intervalle ne contient pas 0, l'hypothèse nulle est rejetée.</span>
  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/prod.html">prod</a></span><span class="op">(</span><span class="va">CI</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">{</span><span class="va">Decision</span> <span class="op">=</span> <span class="st">"L'effet indirect est significatif"</span><span class="op">}</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">Decision</span><span class="op">)</span> <span class="co"># Sortir le résultats dans la console.</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="la-création-de-données" class="section level2" number="1.6">
<h2>
<span class="header-section-number">1.6</span> La création de données<a class="anchor" aria-label="anchor" href="#la-cr%C3%A9ation-de-donn%C3%A9es"><i class="fas fa-link"></i></a>
</h2>
<p>La création de données d’un modèle de médiation est assez rudimentaire, particulièrement après la lecture du chapitre sur les techniques de modélisation avancées. En fait, dans ce chapitre, un modèle de médiation simple (à trois variables) est utilisé. Par contre, le chapitre n’insiste pas sur les effets indirects, ce qui sera fait ici.</p>
<p>Pour l’exemple ici</p>
<p><span class="math display" id="eq:Bex">\[\begin{equation}
\mathbf{B} =
\left( \begin{array}{ccc}
0 &amp;  0 &amp; 0 \\
.5 &amp;  0 &amp; 0 \\
-.3 &amp; .4 &amp; 0 \\
\end{array}
\right)
\tag{1.3}
\end{equation}\]</span></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Paramètres du modèle</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1102</span><span class="op">)</span>
<span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">80</span>
<span class="va">B</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>,
               <span class="fl">.5</span>, <span class="fl">0</span>, <span class="fl">0</span>,
               <span class="op">-</span><span class="fl">.4</span>, <span class="fl">.6</span>, <span class="fl">0</span><span class="op">)</span>, 
             ncol <span class="op">=</span> <span class="fl">3</span>, nrow <span class="op">=</span> <span class="fl">3</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">V</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="co"># Variance des variables</span>

<span class="co"># Première option : </span>
<span class="co"># Création de la matrice de covariance à partir de B et V</span>
<span class="va">S</span> <span class="op">&lt;-</span> <span class="fu">beta2cov</span><span class="op">(</span>B <span class="op">=</span> <span class="va">B</span>, V <span class="op">=</span> <span class="va">V</span><span class="op">)</span>   
<span class="co"># Vérifier que la fonction `beta2cov()` est bien dans l'environnement</span>
<span class="co"># sinon la ligne précédente ne fonctionnera pas.</span>

<span class="co"># Création de la base de données avec la matrice de covariance</span>
<span class="va">jd</span> <span class="op">&lt;-</span> <span class="fu">MASS</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MASS/man/mvrnorm.html">mvrnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, Sigma <span class="op">=</span> <span class="va">S</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">jd</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"m"</span>, <span class="st">"y"</span><span class="op">)</span>

<span class="co"># Deuxième option : </span>
<span class="co"># Création des données en système d'équations</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n</span>, sd <span class="op">=</span> <span class="va">V</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>

<span class="va">em</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">V</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">B</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">]</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">V</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="va">m</span> <span class="op">&lt;-</span> <span class="va">B</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span> <span class="op">+</span> <span class="va">em</span>

<span class="va">sd_ey</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">V</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">-</span> <span class="op">(</span><span class="va">B</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">]</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">V</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> 
                       <span class="va">B</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">2</span><span class="op">]</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">V</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> 
                       <span class="fl">2</span> <span class="op">*</span> <span class="va">B</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">B</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="va">V</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">^</span><span class="fl">.5</span> <span class="op">*</span> <span class="va">V</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">^</span><span class="fl">.5</span> <span class="op">*</span> <span class="va">B</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="va">ey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, 
            sd <span class="op">=</span> <span class="va">sd_ey</span><span class="op">)</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="va">B</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span> <span class="op">+</span> <span class="va">B</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="va">m</span> <span class="op">+</span> <span class="va">ey</span>

<span class="co"># Création de la base de données avec les trois variables</span>
<span class="va">jd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>,
                 m <span class="op">=</span> <span class="va">m</span>,
                 y <span class="op">=</span> <span class="va">y</span><span class="op">)</span></code></pre></div>
<p>La base de données est ainsi créée en suivant les étapes de chapitre sur les techniques avancées de modélisation. Maintenant, il reste à déterminer l’effet indirect dans le jeu de données. Le jeu de données issu du système d’équations sera utilisé pour la suite.</p>
<p>Comme les fonctions maisons pour la méthode d’étape causale (<code>BK()</code>), et la méthode delta multivarié (<code>mdm()</code>) et la méthode bootstrap (<code>boot()</code>), il est possible de les utiliser pour vérifier l’effet indirect.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">BK</span><span class="op">(</span>donnees <span class="op">=</span> <span class="va">jd</span><span class="op">)</span>
<span class="co">#&gt; L'effet indirect est non significatif</span>
<span class="fu">mdm</span><span class="op">(</span>donnees <span class="op">=</span> <span class="va">jd</span><span class="op">)</span>
<span class="co">#&gt; L'effet indirect est significatif</span>
<span class="fu">boot</span><span class="op">(</span>donnees <span class="op">=</span> <span class="va">jd</span><span class="op">)</span>
<span class="co">#&gt; L'effet indirect est non significatif</span></code></pre></div>
<p>Toutes les analyses confirment la présence d’un effet indirect.</p>
<p>Le défaut des fonctions maison (<code>BK()</code>,<code>mdm()</code> et <code>boot()</code>) est certainement qu’elles ne font que tester les effets indirects. Une fonction plus intéressante serait d’afficher toutes les sorties, soit les coefficients de régressions, leur erreur type, leur intervalle de confiance ou toutes autres informations jugées pertinentes.</p>
</div>
<div id="analyse-complète" class="section level2" number="1.7">
<h2>
<span class="header-section-number">1.7</span> Analyse complète<a class="anchor" aria-label="anchor" href="#analyse-compl%C3%A8te"><i class="fas fa-link"></i></a>
</h2>
<p>La fonction suivante extrait tous les coefficients de régression d’un modèle récursif. L’ordre des variables est ici d’une énorme importance, puisque c’est l’ordre des variables dans le jeu de données qui déterminer l’ordre <em>causal</em> des variables: la première étant la <em>cause</em> de toutes, et la dernière l’<em>effet</em> de toutes.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">indirect</span> <span class="op">&lt;-</span>  <span class="kw">function</span><span class="op">(</span><span class="va">donnees</span><span class="op">)</span><span class="op">{</span>
  <span class="va">COV</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cov</a></span><span class="op">(</span><span class="va">donnees</span><span class="op">)</span>   <span class="co"># Matrice de covariance</span>
  <span class="va">p</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span>        <span class="co"># Nombre de variable</span>
  
  <span class="co"># Calculer la matrice des coefficients</span>
  <span class="co"># régression. Le lecteur assidu aura reconnu </span>
  <span class="co"># la fonction `cov2beta()`</span>
  <span class="va">BETA</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">p</span>, <span class="va">p</span><span class="op">)</span>  
  <span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">p</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
    <span class="va">R</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/solve.html">solve</a></span><span class="op">(</span><span class="va">COV</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">i</span>,<span class="fl">1</span><span class="op">:</span><span class="va">i</span><span class="op">]</span>, <span class="va">COV</span><span class="op">[</span><span class="fl">1</span><span class="op">+</span><span class="va">i</span>,<span class="fl">1</span><span class="op">:</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>
    <span class="va">BETA</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">:</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span>  <span class="va">R</span>
  <span class="op">}</span>
  <span class="co"># Extraire les coefficients de régression en vecteur</span>
  <span class="va">est</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">BETA</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html">lower.tri</a></span><span class="op">(</span><span class="va">BETA</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
  
  <span class="co"># Libellés des effets directs</span>
  <span class="va">name</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span>
  <span class="va">label</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="va">name</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/utils/combn.html">combn</a></span><span class="op">(</span><span class="va">p</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span>, <span class="op">(</span><span class="va">p</span> <span class="op">*</span> <span class="op">(</span><span class="va">p</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>, <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
  <span class="va">rname</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>FUN <span class="op">=</span> <span class="va">paste</span>, <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">label</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, <span class="st">"-&gt;"</span><span class="op">)</span>
  <span class="va">rname</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>FUN <span class="op">=</span> <span class="va">paste</span>, <span class="va">rname</span>, <span class="va">label</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, <span class="st">""</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">est</span><span class="op">)</span> <span class="op">&lt;-</span>  <span class="va">rname</span>
  
  <span class="co"># Lister tous les effets indirects possibles</span>
  <span class="kw">if</span><span class="op">(</span><span class="va">p</span> <span class="op">!=</span> <span class="fl">3</span><span class="op">)</span><span class="op">{</span>
    <span class="co"># S'il y a plus de 3 variables, identifier les niveaux supérieurs</span>
    <span class="co"># d'effets indirects (à 4 variables et plus)</span>
    <span class="va">listeffects</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/mapply.html">mapply</a></span><span class="op">(</span><span class="va">combn</span>, <span class="va">p</span>, <span class="fl">3</span><span class="op">:</span><span class="va">p</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="co"># S'il y a 3 variables, il n'y a qu'un niveau</span>
    <span class="va">listeffects</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span>
  
  
  <span class="co"># Extraire tous les effets indirects</span>
  <span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">listeffects</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>    <span class="co"># Nombre de niveaux d'effet indirect</span>
    <span class="va">J</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">listeffects</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>      <span class="co"># Nombre d'effet du niveau i</span>
    <span class="kw">for</span><span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">J</span><span class="op">)</span><span class="op">{</span>                
      <span class="va">ide</span> <span class="op">&lt;-</span>  <span class="va">listeffects</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="va">j</span><span class="op">]</span>    <span class="co"># Identifier l'effet en cours</span>
      <span class="va">B</span> <span class="op">&lt;-</span>  <span class="va">BETA</span><span class="op">[</span><span class="va">ide</span>, <span class="va">ide</span><span class="op">]</span>            <span class="co"># Leur coefficients de régression </span>
      <span class="va">B</span> <span class="op">&lt;-</span>  <span class="va">B</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span><span class="op">]</span>           <span class="co"># Retirer les coefficients superflus</span>
      <span class="va">e</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/prod.html">prod</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Calculer l'effet indirect</span>
      <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">name</span><span class="op">[</span><span class="va">ide</span><span class="op">]</span>, <span class="co"># Le libellé</span>
                           collapse <span class="op">=</span> <span class="st">" -&gt; "</span><span class="op">)</span>
      <span class="va">est</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">est</span>, <span class="va">e</span><span class="op">)</span>            <span class="co"># Ajouter l'effet aux autres</span>
    <span class="op">}</span>
  <span class="op">}</span>
  
  <span class="co"># Ajout les effets totaux</span>
  <span class="co"># Calculs</span>
  <span class="va">totald</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/solve.html">solve</a></span><span class="op">(</span><span class="va">COV</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span>, <span class="va">COV</span><span class="op">[</span><span class="va">p</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
  <span class="va">totali</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">totald</span> <span class="op">-</span> <span class="va">BETA</span><span class="op">[</span><span class="va">p</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span>
  
  <span class="co"># Libeller</span>
  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">totali</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"total indirect"</span>,
                            <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                            <span class="st">"-&gt;"</span>,
                            <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span><span class="op">[</span><span class="va">p</span><span class="op">]</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">totald</span><span class="op">)</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"total effect"</span>,
                             <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                             <span class="st">"-&gt;"</span>,
                             <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span><span class="op">[</span><span class="va">p</span><span class="op">]</span><span class="op">)</span>
  
  <span class="co"># Mettre le tout en commun</span>
  <span class="va">estimates</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">est</span>, <span class="va">totali</span>, <span class="va">totald</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Pour tester ce code, il vaut la peine de tester chacune des étapes de la syntaxe précédente avec une matrice de covariance.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Nombre de variables</span>
<span class="va">p</span> <span class="op">&lt;-</span> <span class="fl">4</span>
<span class="co"># Voici la matrice de covariance utilisée</span>
<span class="va">COV</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">4</span>,
                <span class="fl">2</span>, <span class="fl">6</span>, <span class="fl">2</span>, <span class="fl">5</span>,
                <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">1</span>,
                <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="va">p</span>, nrow <span class="op">=</span> <span class="va">p</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span> <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">p</span><span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span> <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">p</span><span class="op">]</span>
<span class="co"># Normalement, celle-ci serait obtenue d'un échantillon</span>
<span class="va">COV</span>
<span class="co">#&gt;   a b c d</span>
<span class="co">#&gt; a 3 2 1 4</span>
<span class="co">#&gt; b 2 6 2 5</span>
<span class="co">#&gt; c 1 2 5 1</span>
<span class="co">#&gt; d 4 5 1 4</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Transformer la matrice de covariance en matrice de coefficient de régression.</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Les prochaines calcules la matrice de coefficients</span>
<span class="co"># régression. Le lecteur assidu aura reconnu </span>
<span class="co"># la fonction `cov2beta()`</span>
<span class="va">BETA</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">p</span>, <span class="va">p</span><span class="op">)</span>  
<span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">p</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="va">R</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/solve.html">solve</a></span><span class="op">(</span><span class="va">COV</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">i</span>,<span class="fl">1</span><span class="op">:</span><span class="va">i</span><span class="op">]</span>, <span class="va">COV</span><span class="op">[</span><span class="fl">1</span><span class="op">+</span><span class="va">i</span>,<span class="fl">1</span><span class="op">:</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>
  <span class="va">BETA</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">:</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span>  <span class="va">R</span>
<span class="op">}</span>
<span class="va">BETA</span>
<span class="co">#&gt;       [,1]  [,2]   [,3] [,4]</span>
<span class="co">#&gt; [1,] 0.000 0.000  0.000    0</span>
<span class="co">#&gt; [2,] 0.667 0.000  0.000    0</span>
<span class="co">#&gt; [3,] 0.143 0.286  0.000    0</span>
<span class="co">#&gt; [4,] 1.033 0.567 -0.233    0</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Vectoriser <code>BETA</code>.</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Extraire les coefficients de régression en vecteur</span>
<span class="va">est</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">BETA</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html">lower.tri</a></span><span class="op">(</span><span class="va">BETA</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
<span class="va">est</span>
<span class="co">#&gt;        [,1]</span>
<span class="co">#&gt; [1,]  0.667</span>
<span class="co">#&gt; [2,]  0.143</span>
<span class="co">#&gt; [3,]  1.033</span>
<span class="co">#&gt; [4,]  0.286</span>
<span class="co">#&gt; [5,]  0.567</span>
<span class="co">#&gt; [6,] -0.233</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Libeller les effets directs.</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Libellés des effets directs</span>
<span class="va">name</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span>
<span class="va">label</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="va">name</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/utils/combn.html">combn</a></span><span class="op">(</span><span class="va">p</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span>, <span class="op">(</span><span class="va">p</span> <span class="op">*</span> <span class="op">(</span><span class="va">p</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>, <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">rname</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>FUN <span class="op">=</span> <span class="va">paste</span>, <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">label</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, <span class="st">"-&gt;"</span><span class="op">)</span>
<span class="va">rname</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>FUN <span class="op">=</span> <span class="va">paste</span>, <span class="va">rname</span>, <span class="va">label</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, <span class="st">""</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">est</span><span class="op">)</span> <span class="op">&lt;-</span>  <span class="va">rname</span>
<span class="co"># Beaucoup de syntaxe pour au final bien peu, mais</span>
<span class="co"># le résultat est élégant</span>
<span class="va">est</span>
<span class="co">#&gt;           [,1]</span>
<span class="co">#&gt; a -&gt; b   0.667</span>
<span class="co">#&gt; a -&gt; c   0.143</span>
<span class="co">#&gt; a -&gt; d   1.033</span>
<span class="co">#&gt; b -&gt; c   0.286</span>
<span class="co">#&gt; b -&gt; d   0.567</span>
<span class="co">#&gt; c -&gt; d  -0.233</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Lister tous les effets indirects possibles</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Lister tous les effets indirects possibles</span>
<span class="kw">if</span><span class="op">(</span><span class="va">p</span> <span class="op">!=</span> <span class="fl">3</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># S'il y a plus de 3 variables, identifier les niveaux supérieurs</span>
  <span class="co"># d'effets indirects (à 4 variables et plus)</span>
  <span class="va">listeffects</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/mapply.html">mapply</a></span><span class="op">(</span><span class="va">combn</span>, <span class="va">p</span>, <span class="fl">3</span><span class="op">:</span><span class="va">p</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
  <span class="co"># S'il y a 3 variables, il n'y a qu'un niveau</span>
  <span class="va">listeffects</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>
<span class="va">listeffects</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt;      [,1] [,2] [,3] [,4]</span>
<span class="co">#&gt; [1,]    1    1    1    2</span>
<span class="co">#&gt; [2,]    2    2    3    3</span>
<span class="co">#&gt; [3,]    3    4    4    4</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt;      [,1]</span>
<span class="co">#&gt; [1,]    1</span>
<span class="co">#&gt; [2,]    2</span>
<span class="co">#&gt; [3,]    3</span>
<span class="co">#&gt; [4,]    4</span></code></pre></div>
<p>Dans cet exemple, il y a deux niveaux d’effets indirects : un niveau à trois variables dont il y a quatre combinaisons possibles et un second niveau à quatre variables dont il n’y a qu’une combinaison.</p>
<ol start="5" style="list-style-type: decimal">
<li>Extraire tous les effets indirects et les libeller adéquatement.</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Extraire tous les effets indirects</span>
<span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">listeffects</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>  <span class="co"># Nombre de niveaux d'effet indirect</span>
  <span class="va">J</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">listeffects</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>      <span class="co"># Nombre d'effet du niveau i</span>
  <span class="kw">for</span><span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">J</span><span class="op">)</span><span class="op">{</span>                
    <span class="va">ide</span> <span class="op">&lt;-</span>  <span class="va">listeffects</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="va">j</span><span class="op">]</span>    <span class="co"># Identifier l'effet en cours</span>
    <span class="va">B</span> <span class="op">&lt;-</span>  <span class="va">BETA</span><span class="op">[</span><span class="va">ide</span>, <span class="va">ide</span><span class="op">]</span>            <span class="co"># Leur coefficients de régression </span>
    <span class="va">B</span> <span class="op">&lt;-</span>  <span class="va">B</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span><span class="op">]</span>           <span class="co"># Retirer les coefficients superflus</span>
    <span class="va">e</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/prod.html">prod</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Calculer l'effet indirect</span>
    <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">name</span><span class="op">[</span><span class="va">ide</span><span class="op">]</span>, <span class="co"># Le libellé</span>
                         collapse <span class="op">=</span> <span class="st">" -&gt; "</span><span class="op">)</span> 
    <span class="va">est</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">est</span>, <span class="va">e</span><span class="op">)</span>            <span class="co"># Ajouter l'effet aux autres</span>
  <span class="op">}</span>
<span class="op">}</span>
<span class="va">est</span>
<span class="co">#&gt;                     [,1]</span>
<span class="co">#&gt; a -&gt; b            0.6667</span>
<span class="co">#&gt; a -&gt; c            0.1429</span>
<span class="co">#&gt; a -&gt; d            1.0333</span>
<span class="co">#&gt; b -&gt; c            0.2857</span>
<span class="co">#&gt; b -&gt; d            0.5667</span>
<span class="co">#&gt; c -&gt; d           -0.2333</span>
<span class="co">#&gt; a -&gt; b -&gt; c       0.1905</span>
<span class="co">#&gt; a -&gt; b -&gt; d       0.3778</span>
<span class="co">#&gt; a -&gt; c -&gt; d      -0.0333</span>
<span class="co">#&gt; b -&gt; c -&gt; d      -0.0667</span>
<span class="co">#&gt; a -&gt; b -&gt; c -&gt; d -0.0444</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Calculer les effets totaux de la première variable et mettre le tout en commun.</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ajout les effets totaux</span>
<span class="co"># Calculs</span>
<span class="va">totald</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/solve.html">solve</a></span><span class="op">(</span><span class="va">COV</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span>, <span class="va">COV</span><span class="op">[</span><span class="va">p</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="va">totali</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">totald</span> <span class="op">-</span> <span class="va">BETA</span><span class="op">[</span><span class="va">p</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span>

<span class="co"># Libeller</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">totali</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"total indirect"</span>,
                          <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                          <span class="st">"-&gt;"</span>,
                          <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span><span class="op">[</span><span class="va">p</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">totald</span><span class="op">)</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"total effect"</span>,
                           <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                           <span class="st">"-&gt;"</span>,
                           <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">COV</span><span class="op">)</span><span class="op">[</span><span class="va">p</span><span class="op">]</span><span class="op">)</span>

<span class="co"># Mettre le tout en commun</span>
<span class="va">estimates</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">est</span>, <span class="va">totali</span>, <span class="va">totald</span><span class="op">)</span>
<span class="va">estimates</span>
<span class="co">#&gt;                          [,1]</span>
<span class="co">#&gt; a -&gt; b                 0.6667</span>
<span class="co">#&gt; a -&gt; c                 0.1429</span>
<span class="co">#&gt; a -&gt; d                 1.0333</span>
<span class="co">#&gt; b -&gt; c                 0.2857</span>
<span class="co">#&gt; b -&gt; d                 0.5667</span>
<span class="co">#&gt; c -&gt; d                -0.2333</span>
<span class="co">#&gt; a -&gt; b -&gt; c            0.1905</span>
<span class="co">#&gt; a -&gt; b -&gt; d            0.3778</span>
<span class="co">#&gt; a -&gt; c -&gt; d           -0.0333</span>
<span class="co">#&gt; b -&gt; c -&gt; d           -0.0667</span>
<span class="co">#&gt; a -&gt; b -&gt; c -&gt; d      -0.0444</span>
<span class="co">#&gt; total indirect a -&gt; d  0.3000</span>
<span class="co">#&gt; total effect a -&gt; d    1.3333</span></code></pre></div>
<p>Magnifique! Toutefois, le statisticien s’intéresse rarement qu’aux coefficients de régression. Il aime aussi connaître l’erreur type (erreur standard), la valeur-<span class="math inline">\(p\)</span>, ou peut-être même souhaite-t-il calculer un intervalle de confiance. Une solution bien simple qui ne nécessitera que peu de syntaxe, en plus de respecter les postulats sous-jacents à l’analyse de médiation est le bootstrap. Les éléments fondamentaux du bootstrap sont toujours les mêmes : prendre un jeu de données avec des unités rééchantillonnées aléatoirement avec remplacement, calculer les indices désirés, et réitérer un nombre élevé de fois.</p>
<p>Avantageusement la fonction maison <code>indirect()</code> calcule tous les indices statistiques pertinents. Il ne reste que le rééchantillonnage et les réplications à programmer.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Le bootstrap de `indirect()` pour le jeu de données en exemple</span>
<span class="co"># Informations préliminaires</span>
<span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">.05</span>         <span class="co"># Erreur de type I</span>
<span class="va">n</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">jd</span><span class="op">)</span>       <span class="co"># Nombre d'unités</span>
<span class="va">reps</span> <span class="op">&lt;-</span>  <span class="fl">5000</span>        <span class="co"># Nombre de réplications</span>

<span class="va">nest</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Special.html">choose</a></span><span class="op">(</span><span class="va">p</span>, <span class="fl">2</span><span class="op">:</span><span class="va">p</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span> <span class="co"># Nombre d'estimateurs</span>

<span class="co"># Vérifier que la fonction `indirect()`  est bien </span>
<span class="co"># dans l'environnement</span>
<span class="va">Est</span> <span class="op">&lt;-</span>  <span class="fu">indirect</span><span class="op">(</span><span class="va">jd</span><span class="op">)</span>

<span class="co"># Variable vide (Est) pour enregistrer les résultats</span>
<span class="co"># avec comme 1ere colonne, les résultats originaux</span>
<span class="va">Est</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Est <span class="op">=</span> <span class="va">Est</span>, 
                   X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, ncol <span class="op">=</span> <span class="va">reps</span><span class="op">)</span><span class="op">)</span> 

<span class="co"># La boucle</span>
<span class="co"># Elle commence à 2 à cause de la première colonne</span>
<span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="op">(</span><span class="va">reps</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
  <span class="va">D</span> <span class="op">&lt;-</span> <span class="va">jd</span><span class="op">[</span><span class="va">index</span>,<span class="op">]</span>
  <span class="va">Est</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span>  <span class="fu">indirect</span><span class="op">(</span><span class="va">D</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Mettre le tout en commun</span>
<span class="va">Resultats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  Estimates <span class="op">=</span> <span class="va">Est</span><span class="op">$</span><span class="va">Est</span>,
  S.E. <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">Est</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="va">sd</span><span class="op">)</span>, 
  CIinf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">Est</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="va">quantile</span>, probs <span class="op">=</span> <span class="va">alpha</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span>,
  CIsup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">Est</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="va">quantile</span>, probs <span class="op">=</span> <span class="fl">1</span><span class="op">-</span><span class="va">alpha</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">Resultats</span>
<span class="co">#&gt;                       Estimates   S.E.   CIinf   CIsup</span>
<span class="co">#&gt; x -&gt; m                    0.317 0.0798  0.1551  0.4657</span>
<span class="co">#&gt; x -&gt; y                   -0.396 0.0876 -0.5706 -0.2240</span>
<span class="co">#&gt; m -&gt; y                    0.634 0.1289  0.3800  0.8901</span>
<span class="co">#&gt; x -&gt; m -&gt; y               0.201 0.0633  0.0872  0.3351</span>
<span class="co">#&gt; total indirect x -&gt; y     0.201 0.0633  0.0872  0.3351</span>
<span class="co">#&gt; total effect x -&gt; y      -0.195 0.0835 -0.3607 -0.0315</span></code></pre></div>
<p>La variable <code>Resultats</code> contient tous les résultats pertinents. La colonne <code>Resultats$Estimates</code> retourne tous les coefficients de régression avec leur erreur type (erreur standard ou <em>standard error</em>) en deuxième colonne. Les dernières colonnes donnent les intervalles de confiance inférieurs et supérieurs. Comme aucune ne contient la valeur 0 au sein de son intervalle, alors elles sont toutes significatives.</p>
<p>TODO</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="12-Mediation_files/figure-html/resmed-1.png" width="672"></div>
<!-- \begin{figure} -->
<!-- \begin{center} -->
<!-- \begin{tikzpicture}[very thick, >=stealth] -->
<!-- \Large -->
<!-- \tikzstyle{rect} = [rectangle, minimum width = 2cm, minimum height = 1cm, font = \LARGE] -->
<!-- \node (m) [draw, rect] at (3,3) {$m$}; -->
<!-- \node (x) [draw, rect] at (0,0) {$x$}; -->
<!-- \node (y) [draw, rect] at (6,0) {$y$}; -->
<!-- \node (cap1) at (3,-2) {a) Effet indirect}; -->
<!-- \node (x2) [draw, rect] at (0,-4) {$x$}; -->
<!-- \node (y2) [draw, rect] at (6,-4) {$y$}; -->
<!-- \node (cap1) at (3,-5.5) {b) Effet total}; -->
<!-- \draw[->] (x) to node [anchor = east] {$0.32*$} (m); -->
<!-- \draw[->] (m) to node [anchor = west] {$0.63*$} (y); -->
<!-- \draw[->] (x) to node [anchor = north] {$-0.40*$ } (y); -->
<!-- \draw[->] (x2) to node [anchor = north] {$-0.20*$} (y2); -->
<!-- \end{tikzpicture} -->
<!-- \caption{Résultats de la médiation} -->
<!-- \label{resmed} -->
<!-- \end{center} -->
<!-- \end{figure} -->
<p>Les résultats sont illustrés dans la figure <span class="math inline">\(\ref{resmed}\)</span>. Les coefficients sont ajoutés à leurs trajectoires respectivement. Par bonnes mesures, des étoiles de significativité, * , l’ultime symbole de découvertes scientifiques, sont ajoutés aux trajectoires dont les intervalles de confiance n’incluent pas 0. Il ne reste qu’à rapporter l’effet indirect dans le texte ou un tableau d’un article scientifique, comme le tableau <a href="analyse-de-m%C3%A9diation.html#tab:res">1.1</a>.</p>
<div class="inline-table"><table class=" lightable-classic table" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;'>
<caption>
<span id="tab:res">Table 1.1: </span>Symboles logiques et leur signification
</caption>
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Estimates
</th>
<th style="text-align:center;">
S.E.
</th>
<th style="text-align:center;">
CIinf
</th>
<th style="text-align:center;">
CIsup
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
x -&gt; m
</td>
<td style="text-align:center;">
0.317
</td>
<td style="text-align:center;">
0.080
</td>
<td style="text-align:center;">
0.155
</td>
<td style="text-align:center;">
0.466
</td>
</tr>
<tr>
<td style="text-align:left;">
x -&gt; y
</td>
<td style="text-align:center;">
-0.396
</td>
<td style="text-align:center;">
0.088
</td>
<td style="text-align:center;">
-0.571
</td>
<td style="text-align:center;">
-0.224
</td>
</tr>
<tr>
<td style="text-align:left;">
m -&gt; y
</td>
<td style="text-align:center;">
0.634
</td>
<td style="text-align:center;">
0.129
</td>
<td style="text-align:center;">
0.380
</td>
<td style="text-align:center;">
0.890
</td>
</tr>
<tr>
<td style="text-align:left;">
x -&gt; m -&gt; y
</td>
<td style="text-align:center;">
0.201
</td>
<td style="text-align:center;">
0.063
</td>
<td style="text-align:center;">
0.087
</td>
<td style="text-align:center;">
0.335
</td>
</tr>
<tr>
<td style="text-align:left;">
total indirect x -&gt; y
</td>
<td style="text-align:center;">
0.201
</td>
<td style="text-align:center;">
0.063
</td>
<td style="text-align:center;">
0.087
</td>
<td style="text-align:center;">
0.335
</td>
</tr>
<tr>
<td style="text-align:left;">
total effect x -&gt; y
</td>
<td style="text-align:center;">
-0.195
</td>
<td style="text-align:center;">
0.084
</td>
<td style="text-align:center;">
-0.361
</td>
<td style="text-align:center;">
-0.031
</td>
</tr>
</tbody>
</table></div>
<p>Calculer les valeurs-<span class="math inline">\(t\)</span> et valeurs-<span class="math inline">\(p\)</span> est envisageable en utilisant les résultats déjà recueillis. La valeur-<span class="math inline">\(t\)</span> est le ratio entre l’estimateur et son erreur type, la valeur-<span class="math inline">\(p\)</span> est la rareté d’observer cette valeur-<span class="math inline">\(t\)</span> ou une valeur plus rare par rapport à l’hypothèse nulle avec un degré de liberté de <code>dl = n - p</code>, soit plus exactement le nombre d’unités moins le nombre de variables indépendantes.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Resultats</span><span class="op">$</span><span class="va">t.value</span> <span class="op">&lt;-</span> <span class="va">Resultats</span><span class="op">$</span><span class="va">Estimates</span> <span class="op">/</span> <span class="va">Resultats</span><span class="op">$</span><span class="va">S.E.</span>
<span class="va">Resultats</span><span class="op">$</span><span class="va">p.value</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">pt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">Resultats</span><span class="op">$</span><span class="va">t.value</span><span class="op">)</span>, df <span class="op">=</span> <span class="va">n</span> <span class="op">-</span> <span class="va">p</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fl">2</span>
<span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">Resultats</span>, <span class="fl">3</span><span class="op">)</span> <span class="co"># Résultats arrondis à 3 décimales</span>
<span class="co">#&gt;                       Estimates  S.E.  CIinf  CIsup t.value</span>
<span class="co">#&gt; x -&gt; m                    0.317 0.080  0.155  0.466    3.97</span>
<span class="co">#&gt; x -&gt; y                   -0.396 0.088 -0.571 -0.224   -4.52</span>
<span class="co">#&gt; m -&gt; y                    0.634 0.129  0.380  0.890    4.92</span>
<span class="co">#&gt; x -&gt; m -&gt; y               0.201 0.063  0.087  0.335    3.17</span>
<span class="co">#&gt; total indirect x -&gt; y     0.201 0.063  0.087  0.335    3.17</span>
<span class="co">#&gt; total effect x -&gt; y      -0.195 0.084 -0.361 -0.031   -2.34</span>
<span class="co">#&gt;                       p.value</span>
<span class="co">#&gt; x -&gt; m                  0.000</span>
<span class="co">#&gt; x -&gt; y                  0.000</span>
<span class="co">#&gt; m -&gt; y                  0.000</span>
<span class="co">#&gt; x -&gt; m -&gt; y             0.002</span>
<span class="co">#&gt; total indirect x -&gt; y   0.002</span>
<span class="co">#&gt; total effect x -&gt; y     0.022</span></code></pre></div>
<p>Si les coefficients de régression standardisés étaient préférés, ceux-ci sont obtenables simplement en standardisant le jeu de données, puis rouler l’analyse de médiation de nouveau. Pour standardiser rapidement, <code>z.donnees = apply(donnees, MARGIN = 2, FUN = scale)</code> applique (<code><a href="https://rdrr.io/r/base/apply.html">apply()</a></code>) la fonction <code>FUN = scale</code> qui standardise les données (<code>donnees</code>) par colonne <code>MARGIN = 2</code>.</p>
</div>
<div id="les-packages" class="section level2" number="1.8">
<h2>
<span class="header-section-number">1.8</span> Les packages<a class="anchor" aria-label="anchor" href="#les-packages"><i class="fas fa-link"></i></a>
</h2>
<p>Le présent chapitre ne fait que gratter la surface de ce qu’il est possible de faire avec l’analyse de médiation. Des articles comme <span class="citation">Caron &amp; Valois (<a href="r%C3%A9f%C3%A9rences.html#ref-Caron18" role="doc-biblioref">2018</a>)</span> et <span class="citation">Lemardelet &amp; Caron (<a href="r%C3%A9f%C3%A9rences.html#ref-Lemardeletsoumis" role="doc-biblioref">révision</a>)</span> donnent des exemples de syntaxe <strong>R</strong> en plus d’approfondir l’analyse. Il existe plusieurs packages <strong>R</strong> pour réaliser l’analyse de médiation, comme <code>mediation</code> [(Tingley et al., 2014) <span class="citation">(<a href="r%C3%A9f%C3%A9rences.html#ref-mediation" role="doc-biblioref">Tingley et al., 2014</a>)</span> et <code>Rmediation</code> <span class="citation">(<a href="r%C3%A9f%C3%A9rences.html#ref-Rmediation" role="doc-biblioref">Tofighi &amp; MacKinnon, 2011</a>)</span>, tous les deux ayant leur propre documentation. Pour des analyses plus compliquées recourant aux équations structurelles, comme <code>lavaan</code> <span class="citation">(<a href="r%C3%A9f%C3%A9rences.html#ref-lavaan" role="doc-biblioref">Rosseel, 2012</a>)</span>, mais aussi bien d’autres pourront être utile. Toutefois, ce chapitre espère avoir convaincu le lecteur que l’analyse peut être relativement aisément <em>fait maison</em></p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="pr%C3%A9face.html">Préface</a></div>
<div class="next"><a href="r%C3%A9f%C3%A9rences.html">Références</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#analyse-de-m%C3%A9diation"><span class="header-section-number">1</span> Analyse de médiation</a></li>
<li><a class="nav-link" href="#analyse-de-m%C3%A9diation-simple"><span class="header-section-number">1.1</span> Analyse de médiation simple</a></li>
<li><a class="nav-link" href="#analyse-de-leffet-indirect"><span class="header-section-number">1.2</span> Analyse de l’effet indirect</a></li>
<li><a class="nav-link" href="#la-m%C3%A9thode-d%C3%A9tape-causale"><span class="header-section-number">1.3</span> La méthode d’étape causale</a></li>
<li><a class="nav-link" href="#la-m%C3%A9thode-delta-multivari%C3%A9"><span class="header-section-number">1.4</span> La méthode delta multivarié</a></li>
<li><a class="nav-link" href="#le-bootstrap"><span class="header-section-number">1.5</span> Le bootstrap</a></li>
<li><a class="nav-link" href="#la-cr%C3%A9ation-de-donn%C3%A9es"><span class="header-section-number">1.6</span> La création de données</a></li>
<li><a class="nav-link" href="#analyse-compl%C3%A8te"><span class="header-section-number">1.7</span> Analyse complète</a></li>
<li><a class="nav-link" href="#les-packages"><span class="header-section-number">1.8</span> Les packages</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/quantmeth/MQR/blob/master/12-Mediation.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/quantmeth/MQR/edit/master/12-Mediation.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Méthodes Quantitatives avec R</strong>" was written by P.-O. Caron. It was last built on 2022-05-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
